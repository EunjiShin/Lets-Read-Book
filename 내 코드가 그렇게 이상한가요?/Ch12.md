# 12. 메서드 (함수) : 좋은 클래스에는 좋은 메서드가 있다
## 12.1 반드시 현재 클래스의 인스턴스 변수 사용하기

- **메서드는 반드시 현재 클래스의 인스턴스 변수를 사용하도록 설계한다.**
    - 다른 클래스의 인스턴스 변수를 변경하는 메서드는 응집도를 낮추기 때문
    - 만약 다른 클래스 인스턴스 변수를 변경하고 싶다면, **변경된 내용을 다루는 새로운 인스턴스를 생성하고 이를 리턴하는 형태로 구현**할 것

---

## 12.2 불변을 활용해서 예상할 수 있는 메서드 만들기

- 가변 인스턴스 변수를 변경하는 메서드는 의도치않게 다른 부분에 영향을 줄 수 있다.
    - 이 경우 예기치 못한 동작이 발생하거나, 유지보수가 어려워진다.
- 따라서 **불변을 활용해 예기치 못한 상황 자체를 막자**.

---

## 12.3 묻지 말고 명령하라

- getter/setter은 다른 클래스를 확인하고 조작하는 메서드 구조가 되기 쉽다.
    - 얘네는 캡슐화가 아니다. 오히려 응집도를 낮추고, 불안전한 클래스를 만든다.
- 메서드를 호출하는 쪽은 복잡한 처리를 하지 않는 것이 좋다.
    - 묻지 말고 명령하라 / 단순히 호출만 할 것!

---

## 12.4 커맨드/쿼리 분리

> ❄️ 커맨드/쿼리 분리 패턴 (CQS) : 메서드는 커맨드 또는 쿼리 중 하나만 하도록 설계해야 한다는 패턴

| 메서드 종류 구분 | 설명 |
| --- | --- |
| 커맨드 | 상태를 변경하는 것 |
| 쿼리 | 상태를 리턴하는 것 |
| 모디파이어 | 커맨드와 쿼리를 동시에 하는 것 |
- 상태 변경과 추출을 동시에 수행해서 여러 문제의 원인이 되고, 사용자도 쓰기 힘든 메서드

    ```java
    int gainAndGetPoint() {
    	point += 10;
    }
    ```

- 상태 변경과 추출 둘 중 하나만 하도록 메서드를 설계하자.

    ```java
    // 포인트 증가 (커맨드)
    void gainPoint() {
    	point += 10;
    }
    
    // 포인트 리턴 (쿼리)
    int getPoint() {
    	return point;
    }
    ```


---

## 12.5 매개변수

- 입력값 매개변수 설계 시 주의해야 할 사항들!

### 불변 매개변수로 만들기

- 매개변수를 바꾸면 값의 의미가 바뀌어, 어떤 의미인지 그리고 어디서 변경되었는지 유추하기 어렵다.
- final을 붙여 불변으로 만들자.
    - 만약 변경하고 싶다면 불변 지역 변수를 만든 후, 여기에 변경 값을 할당하는 식으로 사용하자.

### 플래그 매개변수 사용하지 않기

- 플래그를 이용하면 코드를 읽는 사람이 메서드가 무슨 일을 하는지 알기 어렵다.
- 전략 패턴을 사용하는 등, 다른 구조로 설계하자.

### null 전달하지 않기

- null을 활용하는 로직은 NPE 발생 가능성이 높고, null을 확인해야 하므로 로직이 복잡해진다.
- null에 의미를 부여하지 말자! enum을 활용하는 등, 다른 방법으로 상태를 할당하여 null을 전달하지 말 것

### 출력 매개변수 사용하지 않기

- 출력 매개변수를 쓰면 응집도가 낮아진다. 매개변수는 기본적으로 입력 값!

### 매개변수는 최대한 적게 사용하기

- 메서드에 매개변수가 많다 = 메서드가 여러 기능을 처리한다 = 로직이 복잡해 문제가 많아진다
- 매개변수가 많아질 수 밖에 없다면, 별도의 클래스로 뽑아보자

---

## 12.6 리턴 값

### ‘자료형’을 사용해서 리턴 값의 의도 나타내기

```java
class Price {
	... 

	int add(final Price other) {
		return amount + other.amount;
	}
}
```

- add메서드의 리턴, int 자료형은 리턴한 값의 의미를 호출하는 쪽에 전달할 수 없다.
    - 이게 상품 가격 합계인지, 할인 금액인지, 배송비인지.. 어떻게 알아!
    - 따라서 값이 무엇을 의미하는지 알기 힘들기에 매개변수를 잘못 전달하는 실수가 발생할 수 있다.
- 따라서 기본 자료형을 사용하지 말고, **독자적인 자료형을 이용해 의도를 명확히 드러내자.**

### null 리턴하지 않기

- null 리턴하지 말 것!

### 오류는 리턴 값으로 리턴하지 말고 예외 발생시키기

- 오류가 생겼을 때 값을 전달한다면, 호출하는 쪽에서 ‘오류가 있을 때는 어떤 값이 돌아올거야’ 라는 걸 알고 있어야 한다.
    - 만약 오류 처리를 클라이언트가 잊는다면 버그가 생길 것!
    - 이렇게 어떤 값으로 여러 의미를 나타내는 중의적 사용은 **상황에 따라 의미가 달라지므로 읽는 사람에게 혼란**을 주고, **시스템 여기저기에 조건 분기를 만들어 쓸데없이 로직을 복잡**하게 만든다.
- 오류가 생겼을 땐 곧바로 예외를 발생시키자.